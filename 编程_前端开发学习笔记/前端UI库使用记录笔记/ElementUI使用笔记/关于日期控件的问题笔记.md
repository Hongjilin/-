# 1、关于日期控件日期少一天的问题

>在我进行前后端联调时,**发现传给服务端的参数比输入选择的日期少一天**,但代码逻辑并没有什么错误
>
>随后经过排查发现是 `el-date-picker日期控件`的问题

## Ⅰ- 问题说明

>1. 代码示例
>
>```vue
><el-form-item label="申请时间" prop="applyDate">
>   <el-date-picker
>     class="eve-common-date-picker"
>     :size="$size"
>     v-model="form.applyDate"
>     type="date"
>     :style="{width:'100% '}"
>     placeholder="请选择申请时间"
>   ></el-date-picker>
></el-form-item>
>```
>
>2. 传参截图
>
>![image-20211215144633764](ElementUI使用笔记的图片/image-20211215144633764.png)

## Ⅱ- 原因剖析

>**element-ui中时间控件的默认时间为国际标准时间，所以与北京时间差8个小时**

## Ⅲ- 解决方案

>在标签中加上**value-format="yyyy-MM-dd"** 即可,将其转换格式
>
>1. 解决代码
>
>   ```vue
>   <el-form-item label="申请时间" prop="applyDate">
>      <el-date-picker
>        class="eve-common-date-picker"
>        :size="$size"
>        v-model="form.applyDate"
>        type="date"
>        :style="{width:'100% '}"
>        placeholder="请选择申请时间"
>        value-format="yyyy-MM-dd"      //--------多加这一行代码-----//
>      ></el-date-picker>
>   </el-form-item>
>   ```
>
>   
>
>2. 成功解决
>
>![image-20211215145041672](ElementUI使用笔记的图片/image-20211215145041672.png) 

# 2、关于时间区间选择 查询边界错误的问题

## Ⅰ - 问题说明

>当我们使用时间选择框选择时间区间时,处于边界的数据往往会得不到 比如 : 
>
>* 选择 1~11号的数据,实际上默认转换成 `1号0时0分~11号0时0分`
>* 这样我们是查不到11号0时到23:59分的数据的

## Ⅱ - 解决方案

>设置两个属性即可
>
>`value-format="yyyy-MM-dd HH:mm:ss"
>:default-time="['00:00:00', '23:59:59']"`
>
>```vue
><el-date-picker
>  v-model="form.applyDate"
>  value-format="yyyy-MM-dd HH:mm:ss"
>  :default-time="['00:00:00', '23:59:59']"
>  :style="{width:'100% '}"
>  type="daterange"
>  range-separator="~"
>  start-placeholder="开始日期"
>  end-placeholder="结束日期"
>></el-date-picker>
>```

# 3、日期格式转化后限制时间范围picker-options失效的问题

## Ⅰ- 问题说明

>1. 因为element-ui如不指定 `value-format` 就会出现日期数据少一天的问题,所以需要加上这个属性
>
>2. 但是当我们加上格式转换后,原来的`picker-options`就失去了限制时间范围的效果,这是为什么?
>
>   > 实际上是因为格式转换后,我们的时间格式转换成了 **字符串** 格式,所以我们要在`picker-options`对比时间的时候将其转换回来日期格式即可

## Ⅱ - 解决方案

>此处只展示部分代码帮助理解
>
>```vue
><template>
><el-date-picker
>   value-format="yyyy-MM-dd HH:mm:ss"
>   v-model="form.applyEndDate"
>   type="date"
>   :picker-options="pickerOptions.theoryExamEndTime"
>   placeholder="选择日期"
> ></el-date-picker>
></template>
><script>
>export default {
>  data () {
>    return {
>   		theoryExamEndTime: {
>        	disabledDate: (time) => {
>          		  return new Date(this.form.theoryExamStartTime)
>                  ? new Date(this.form.theoryExamStartTime) > new Date(time) 
>                 : null }  }   
>    }}}
></script>
>```
>
>效果图![image-20220113190604745](ElementUI使用笔记的图片/image-20220113190604745.png)